{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/frame-animation/build/animation.min.js","webpack:///./src/main.js","webpack:///./src/preload.js"],"names":["box","document","querySelector","flexBox","exit","main","ele","getElementById","key","click","open","keyAnimation","imglist","i","push","keylist","openlist","starlist","load","e","console","log","addEventListener","classList","add","setAttribute","boxAnimation","animation","loadImage","changeSrc","start","remove","dispose","removeAttribute","then","window","location","href","preload","images","callback","timeout","count","success","isTimeout","timeId","hasOwnProperty","item","src","image","Image","doload","setTimeout","onTimeout","status","onload","cleanEvent","onerror","clearTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.animation=e():t.animation=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";function i(t){t&&t()}function s(){this.taskQueue=[],this.timeline=new o,this.state=u,this.index=0}function r(){return new s}var o=n(1),a=n(2),u=0,h=1,c=2,p=0,f=1;s.prototype.loadImage=function(t){var e=function(e){a(t.slice(),e)},n=p;return this._add(e,n)},s.prototype.changePosition=function(t,e,n){var s,r,o=e.length;if(o){var a=this;s=function(i,s){n&&(t.style.backgroundImage=\"url(\"+n+\")\");var r=Math.min(s/a.interval|0,o-1),u=e[r].split(\" \");t.style.backgroundPosition=u[0]+\"px \"+u[1]+\"px\",r===o-1&&i()},r=f}else s=i,r=p;return this._add(s,r)},s.prototype.changeSrc=function(t,e){var n,s,r=e.length;if(r){var o=this;n=function(n,i){var s=Math.min(i/o.interval|0,r-1);t.src=e[s],s===r-1&&n()},s=f}else n=i,s=p;return this._add(n,s)},s.prototype.enterFrame=function(t){return this._add(t,f)},s.prototype.then=function(t){var e=function(e){t(this),e()},n=p;return this._add(e,n)},s.prototype.start=function(t){return this.state===h?this:this.taskQueue.length?(this.state=h,this.interval=t,this._runTask(),this):this},s.prototype.repeat=function(t){var e=this,n=function(){if(\"undefined\"==typeof t)return e.index--,void e._runTask();if(t)t--,e.index--,e._runTask();else{var n=e.taskQueue[e.index];e._next(n)}},i=p;return this._add(n,i)},s.prototype.repeatForever=function(){return this.repeat()},s.prototype.wait=function(t){return this.taskQueue&&this.taskQueue.length>0&&(this.taskQueue[this.taskQueue.length-1].wait=t),this},s.prototype.pause=function(){return this.state===h?(this.state=c,this.timeline.stop(),this):this},s.prototype.restart=function(){return this.state===c?(this.state=h,this.timeline.restart(),this):this},s.prototype.dispose=function(){return this.state!==u?(this.state=u,this.taskQueue=null,this.timeline.stop(),this.timeline=null,this):this},s.prototype._add=function(t,e){return this.taskQueue.push({taskFn:t,type:e}),this},s.prototype._runTask=function(){if(this.taskQueue&&this.state===h){if(this.index===this.taskQueue.length)return void this.dispose();var t=this.taskQueue[this.index];t.type===p?this._syncTask(t):this._asyncTask(t)}},s.prototype._syncTask=function(t){var e=this,n=function(){e._next(t)},i=t.taskFn;i(n)},s.prototype._asyncTask=function(t){var e=this,n=function(n){var i=t.taskFn,s=function(){e.timeline.stop(),e._next(t)};i(s,n)};this.timeline.onenterframe=n,this.timeline.start(this.interval)},s.prototype._next=function(t){var e=this;this.index++,t.wait?setTimeout(function(){e._runTask()},t.wait):this._runTask()},r.version=\"0.2.5\",t.exports=r},function(t,e){\"use strict\";function n(){this.animationHandler=0,this.state=r}function i(t,e){function n(){var s=+new Date;t.animationHandler=u(n),s-i>=t.interval&&(t.onenterframe(s-e),i=s)}var i=+new Date;t.startTime=e,n.interval=t.interval,n()}var s=1e3/60,r=0,o=1,a=2;n.prototype.onenterframe=function(t){},n.prototype.start=function(t){this.state!==o&&(this.state=o,this.interval=t||s,i(this,+new Date))},n.prototype.restart=function(){this.state!==o&&this.dur&&this.interval&&(this.state=o,i(this,+new Date-this.dur))},n.prototype.stop=function(){this.state===o&&(this.state=a,this.startTime&&(this.dur=+new Date-this.startTime),h(this.animationHandler))};var u=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,t.interval||s)}}(),h=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(t){window.clearTimeout(t)}}();t.exports=n},function(t,e){\"use strict\";function n(){return++s}function i(t,e,i){function s(t){function n(){i.onload=i.onerror=null;try{delete window[t.id]}catch(n){}--o||h||(clearTimeout(u),e(a))}t.status=\"loading\";var i=t.img;i.onload=function(){a=a&&!0,t.status=\"loaded\",n()},i.onerror=function(){a=!1,t.status=\"error\",n()},i.src=t.src}function r(){h=!0,e(!1)}var o=0,a=!0,u=0,h=!1;for(var c in t)if(t.hasOwnProperty(c)){var p=t[c];\"string\"==typeof p&&(p=t[c]={src:p}),p&&p.src&&(o++,p.id=\"__img_\"+c+n(),p.img=window[p.id]=new Image,s(p))}o?i&&(u=setTimeout(r,i)):e(a)}var s=0;t.exports=i}])});","import animation from 'frame-animation';\r\nimport load from './preload';\r\n// window.animation = animation;\r\nlet box = document.querySelector('.treasure-box');\r\nlet flexBox = document.querySelector('.open');\r\nlet exit = document.querySelector('.open-exit');\r\nlet main = document.querySelector('.main');\r\n\r\nlet ele = document.getElementById('open-box');\r\nlet key = document.getElementById('open-key-mv');\r\n\r\nlet click = document.querySelector('.open-click-bg');\r\n\r\nlet open = '';\r\nlet keyAnimation = '';\r\n\r\nlet imglist = [];\r\nfor (let i = 2; i < 25; i++) {\r\n    imglist.push(`./static/img/box/xiang2/xiang2_${i}.png`);\r\n}\r\n\r\nlet keylist = [];\r\nfor (let i = 1; i < 76; i++) {\r\n    keylist.push(`./static/img/box/xiang3/xiang3_${i}.png`);\r\n}\r\n\r\nlet openlist = [];\r\nfor (let i = 1; i < 108; i++) {\r\n    openlist.push(`./static/img/box/xiang4/xiang4_${i}.png`);\r\n}\r\n\r\nlet starlist = [];\r\nfor (let i = 1; i < 303; i++) {\r\n    starlist.push(`./static/img/openDoor/openDoor${i}.jpg`);\r\n}\r\n\r\nload(imglist,function(e) {\r\n    console.log(e)\r\n});\r\nload(keylist,function(e) {\r\n    console.log(e)\r\n});\r\nload(openlist,function(e) {\r\n    console.log(e)\r\n});\r\nload(starlist,function(e) {\r\n    console.log(e)\r\n});\r\n\r\n\r\nbox.addEventListener('click', function (e) {\r\n    // 弹出寻宝\r\n    flexBox.classList.add('flex');\r\n    main.classList.add('black');\r\n    // 隐藏宝箱\r\n    box.classList.add('hidden');\r\n    key.setAttribute('src', './static/img/box/xiang3/xiang3_1.png');\r\n    key.setAttribute('id', 'open-key-mv');\r\n    // 宝箱掉落动画\r\n    let boxAnimation = animation().loadImage(imglist).changeSrc(ele, imglist);\r\n    boxAnimation.start(80);\r\n    \r\n}, false);\r\nexit.addEventListener('click', function (e) {\r\n    flexBox.classList.remove('flex');\r\n    main.classList.remove('black');\r\n    box.classList.remove('hidden');\r\n    click.classList.remove('hidden');\r\n\r\n    \r\n    keyAnimation.dispose();\r\n    open.dispose();\r\n}, false);\r\n\r\n\r\nclick.addEventListener('click', function (e) {\r\n    click.classList.add('hidden');\r\n    key.removeAttribute('class');\r\n    \r\n    // 钥匙动画\r\n    keyAnimation = animation().loadImage(keylist).changeSrc(key, keylist).then(function(){\r\n        key.removeAttribute('src');\r\n        key.removeAttribute('id');\r\n        // ele.setAttribute('src', './static/img/box/xiang4/xiang4_1.png');\r\n        // 开箱动画\r\n        open = animation().changeSrc(ele, openlist).start(50).then(function () { window.location.href = \"./face.html\"; });\r\n        // boxAnimation.start(80);\r\n    });\r\n    keyAnimation.start(50);\r\n    // setTimeout(function () {open = animation().changeSrc(ele, openlist).start(80);}, 5600);\r\n   \r\n}, false);\r\n\r\n\r\n","/**\r\n * 图片预加载函数\r\n * @param {图片数组或对象} images \r\n * @param {全部图片加载成功的回调函数} callback \r\n * @param {加载超时的时间} timeout \r\n */\r\nfunction preload(images, callback, timeout) {\r\n    //加载完成的图片计数器\r\n    let count = 0;\r\n    //全部图片加载完成\r\n    let success = true;\r\n    //是否加载超时\r\n    let isTimeout = false;\r\n    //超时定时器ID\r\n    let timeId = 0;\r\n  \r\n    for (let key in images) {\r\n      //过滤掉继承的属性\r\n      if (!images.hasOwnProperty(key)) {\r\n        continue;\r\n      }\r\n      let item = images[key];\r\n      if (typeof(item) === 'string') {\r\n        item = {src: item}\r\n      } else {\r\n        continue;\r\n      }\r\n      count++;\r\n      //设置图片元素的img，是一个Image对象\r\n      item.image = new Image();\r\n      doload(item);\r\n      \r\n    }\r\n    if (timeout) {\r\n      timeId = setTimeout(onTimeout, timeout);\r\n    }\r\n    function doload(item) {\r\n      item.status = 'loading';\r\n  \r\n      item.image.onload = function () {\r\n        item.status = 'loaded';\r\n        success = success && true;\r\n        cleanEvent();\r\n      };\r\n      item.image.onerror = function () {\r\n        item.status = 'error';\r\n        success = false;\r\n        cleanEvent()\r\n      };\r\n      item.image.src = item.src;\r\n      //清除绑定的事件\r\n      function cleanEvent() {\r\n        item.image.onload = item.image.onerror = null;\r\n    \r\n        if (!--count && !isTimeout) {\r\n          clearTimeout(timeId);\r\n          callback(true);\r\n        }    \r\n      }\r\n    }\r\n    //超时函数  \r\n    function onTimeout() {\r\n      isTimeout = true;\r\n      callback(false);\r\n    }\r\n  }\r\n  export default preload;"],"sourceRoot":""}